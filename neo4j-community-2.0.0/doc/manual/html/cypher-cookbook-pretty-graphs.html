<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>5.14. Pretty graphs</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="The Neo4j Manual v2.0.0" /><link rel="up" href="data-modeling-examples.html" title="Chapter 5. Data Modeling Examples" /><link rel="prev" href="cypher-cookbook-clustering-coefficient.html" title="5.13. Calculating the clustering coefficient of a network" /><link rel="next" href="cypher-cookbook-path-tree.html" title="5.15. A multilevel indexing structure (path tree)" /><link rel="preface" href="preface.html" title="Preface" /><link rel="part" href="introduction.html" title="Part I. Introduction" /><link rel="chapter" href="introduction-highlights.html" title="Chapter 1. Neo4j Highlights" /><link rel="chapter" href="graphdb-concepts.html" title="Chapter 2. Graph Database Concepts" /><link rel="chapter" href="graphdb-neo4j.html" title="Chapter 3. The Neo4j Graph Database" /><link rel="part" href="tutorials.html" title="Part II. Tutorials" /><link rel="chapter" href="tutorials-cypher.html" title="Chapter 4. Getting started with Cypher" /><link rel="chapter" href="data-modeling-examples.html" title="Chapter 5. Data Modeling Examples" /><link rel="chapter" href="languages.html" title="Chapter 6. Languages" /><link rel="part" href="cypher-query-lang.html" title="Part III. Cypher Query Language" /><link rel="chapter" href="cypher-intro.html" title="Chapter 7. Introduction" /><link rel="chapter" href="query-syntax.html" title="Chapter 8. Syntax" /><link rel="chapter" href="query-general.html" title="Chapter 9. General Clauses" /><link rel="chapter" href="query-read.html" title="Chapter 10. Reading Clauses" /><link rel="chapter" href="query-write.html" title="Chapter 11. Writing Clauses" /><link rel="chapter" href="query-function.html" title="Chapter 12. Functions" /><link rel="chapter" href="cypher-schema.html" title="Chapter 13. Schema" /><link rel="chapter" href="examples-from-sql-to-cypher.html" title="Chapter 14. From SQL to Cypher" /><link rel="part" href="reference-documentation.html" title="Part IV. Reference" /><link rel="chapter" href="capabilities.html" title="Chapter 15. Capabilities" /><link rel="chapter" href="transactions.html" title="Chapter 16. Transaction Management" /><link rel="chapter" href="import.html" title="Chapter 17. Data Import" /><link rel="chapter" href="graph-algo.html" title="Chapter 18. Graph Algorithms" /><link rel="chapter" href="rest-api.html" title="Chapter 19. REST API" /><link rel="chapter" href="deprecations.html" title="Chapter 20. Deprecations" /><link rel="part" href="operations.html" title="Part V. Operations" /><link rel="chapter" href="deployment.html" title="Chapter 21. Installation &amp; Deployment" /><link rel="chapter" href="embedded-configuration.html" title="Chapter 22. Configuration &amp; Performance" /><link rel="chapter" href="ha.html" title="Chapter 23. High Availability" /><link rel="chapter" href="operations-backup.html" title="Chapter 24. Backup" /><link rel="chapter" href="operations-security.html" title="Chapter 25. Security" /><link rel="chapter" href="operations-monitoring.html" title="Chapter 26. Monitoring" /><link rel="part" href="tools.html" title="Part VI. Tools" /><link rel="chapter" href="tools-webadmin.html" title="Chapter 27. Web Interface" /><link rel="chapter" href="shell.html" title="Chapter 28. Neo4j Shell" /><link rel="part" href="community.html" title="Part VII. Community" /><link rel="chapter" href="community-support.html" title="Chapter 29. Community Support" /><link rel="chapter" href="community-contributing.html" title="Chapter 30. Contributing to Neo4j" /><link rel="part" href="advanced-usage.html" title="Part VIII. Advanced Usage" /><link rel="chapter" href="server-extending.html" title="Chapter 31. Extending the Neo4j Server" /><link rel="chapter" href="tutorials-java-embedded.html" title="Chapter 32. Using Neo4j embedded in Java applications" /><link rel="chapter" href="tutorial-traversal.html" title="Chapter 33. The Traversal Framework" /><link rel="chapter" href="indexing.html" title="Chapter 34. Legacy Indexing" /><link rel="chapter" href="batchinsert.html" title="Chapter 35. Batch Insertion" /><link rel="appendix" href="manpages.html" title="Appendix A. Manpages" /><link rel="refentry" href="re01.html" title="neo4j" /><link rel="refentry" href="re02.html" title="neo4j-installer" /><link rel="refentry" href="re03.html" title="neo4j-shell" /><link rel="refentry" href="re04.html" title="neo4j-backup" /><link rel="refentry" href="re05.html" title="neo4j-arbiter" /><link rel="subsection" href="cypher-cookbook-pretty-graphs.html#cookbook-star-graph" title="5.14.1. Star graph" /><link rel="subsection" href="cypher-cookbook-pretty-graphs.html#cookbook-wheel-graph" title="5.14.2. Wheel graph" /><link rel="subsection" href="cypher-cookbook-pretty-graphs.html#cookbook-complete-graph" title="5.14.3. Complete graph" /><link rel="subsection" href="cypher-cookbook-pretty-graphs.html#cookbook-friendship-graph" title="5.14.4. Friendship graph" /><link rel="copyright" href="ln-idp218960.html" title="License: Creative Commons 3.0" />


<!-- favicon -->

<link rel="shortcut icon" href="http://neo4j.org/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="http://neo4j.org/favicon.ico" type="image/x-icon" />

<!-- style -->

<link href="css/shCore.css" rel="stylesheet" type="text/css" />
<link href="css/shCoreEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/neo.css" rel="stylesheet" type="text/css" />

<!-- Syntax Highlighter -->

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJava.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushBash.js"></script>
<script type="text/javascript" src="js/shBrushPlain.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushGroovy.js"></script>
<script type="text/javascript" src="js/shBrushCypher.js"></script>
<script type="text/javascript" src="js/shBrushScala.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript" src="js/shBrushPython.js"></script>
<script type="text/javascript" src="js/shBrushProperties.js"></script>

<!-- activate when needed
<script type="text/javascript" src="js/shBrushRuby.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
-->
 
<script type="text/javascript">
  SyntaxHighlighter.defaults['tab-size'] = 4;
  SyntaxHighlighter.defaults['gutter'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all()
</script>

<!-- JQuery -->

<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<!-- Replace SVG for browsers that lack support. -->
<script type="text/javascript" src="js/svgreplacer.js"></script>

<!-- Image Scaler -->

<script type="text/javascript" src="js/imagescaler.js"></script>

<!-- Table Styler -->

<script type="text/javascript" src="js/tablestyler.js"></script>

<!-- Version -->

<script type="text/javascript" src="js/version.js"></script>

<!-- Offline Sidebar -->

<script type="text/javascript" src="js/sidebar.js"></script>


<div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">The Neo4j Manual</a></span> &gt; <span class="breadcrumb-link"><a href="tutorials.html">Tutorials</a></span> &gt; <span class="breadcrumb-link"><a href="data-modeling-examples.html">Data Modeling Examples</a></span> &gt; <span class="breadcrumb-node">Pretty graphs</span></div></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="cypher-cookbook-clustering-coefficient.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="cypher-cookbook-path-tree.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="cypher-cookbook-pretty-graphs"></a>5.14. Pretty graphs</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="cypher-cookbook-pretty-graphs.html#cookbook-star-graph">5.14.1. Star graph</a></span></dt><dt><span class="section"><a href="cypher-cookbook-pretty-graphs.html#cookbook-wheel-graph">5.14.2. Wheel graph</a></span></dt><dt><span class="section"><a href="cypher-cookbook-pretty-graphs.html#cookbook-complete-graph">5.14.3. Complete graph</a></span></dt><dt><span class="section"><a href="cypher-cookbook-pretty-graphs.html#cookbook-friendship-graph">5.14.4. Friendship graph</a></span></dt></dl></div><p>This section is showing how to create some of the <a class="ulink" href="http://en.wikipedia.org/wiki/Gallery_of_named_graphs" target="_top">named pretty graphs on Wikipedia</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cookbook-star-graph"></a>5.14.1. Star graph</h3></div></div></div><p>The graph is created by first creating a center node, and then once per element in the range, creates a leaf node and connects it to the center.</p><p><strong>Query. </strong>
</p><pre class="programlisting brush: cypher">CREATE (center)
FOREACH (x IN range(1,6)| CREATE (leaf),(center)-[:X]-&gt;(leaf))
RETURN id(center) AS id;</pre><p>
</p><p>The query returns the id of the center node.</p><div class="queryresult table"><a id="idp7069936"></a><p class="title"><strong>Result</strong></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col class="col1" /></colgroup><thead><tr><th align="left" valign="top">id</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">Nodes created: 7
</th></tr><tr><th align="left" valign="top">Relationships created: 6</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">7</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /><div class="figure"><a id="idp7081136"></a><p class="title"><strong>Figure 5.11. Graph</strong></p><div class="figure-contents"><a class="ulink" href="images/cypher-prettygraphsstar-graph.svg" target="_top">
<span class="inlinemediaobject"><img src="images/cypher-prettygraphsstar-graph.svg" alt="cypher-prettygraphsstar-graph.svg" /></span>
</a></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cookbook-wheel-graph"></a>5.14.2. Wheel graph</h3></div></div></div><p>This graph is created in a number of steps:</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
Create a center node.
</li><li class="listitem">
Once per element in the range, create a leaf and connect it to the center.
</li><li class="listitem">
Connect neighboring leafs.
</li><li class="listitem">
Find the minimum and maximum leaf and connect these.
</li><li class="listitem">
Return the id of the center node.
</li></ul></div><p><strong>Query. </strong>
</p><pre class="programlisting brush: cypher">CREATE (center)
FOREACH (x IN range(1,6)| CREATE (leaf { count:x }),(center)-[:X]-&gt;(leaf))
WITH center
MATCH (large_leaf)&lt;--(center)--&gt;(small_leaf)
WHERE large_leaf.count = small_leaf.count + 1
CREATE (small_leaf)-[:X]-&gt;(large_leaf)
WITH center, min(small_leaf.count) AS min, max(large_leaf.count) AS max
MATCH (first_leaf)&lt;--(center)--&gt;(last_leaf)
WHERE first_leaf.count = min AND last_leaf.count = max
CREATE (last_leaf)-[:X]-&gt;(first_leaf)
RETURN id(center) AS id</pre><p>
</p><p>The query returns the id of the center node.</p><div class="queryresult table"><a id="idp7093664"></a><p class="title"><strong>Result</strong></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col class="col1" /></colgroup><thead><tr><th align="left" valign="top">id</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">Nodes created: 7
</th></tr><tr><th align="left" valign="top">Relationships created: 12
</th></tr><tr><th align="left" valign="top">Properties set: 6</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">7</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /><div class="figure"><a id="idp7106912"></a><p class="title"><strong>Figure 5.12. Graph</strong></p><div class="figure-contents"><a class="ulink" href="images/cypher-prettygraphswheel-graph.svg" target="_top">
<span class="inlinemediaobject"><img src="images/cypher-prettygraphswheel-graph.svg" alt="cypher-prettygraphswheel-graph.svg" /></span>
</a></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cookbook-complete-graph"></a>5.14.3. Complete graph</h3></div></div></div><p>For this graph, a root node is created, and used to hang a number
of nodes from. Then, two nodes are selected, hanging from the center, with the requirement that the
id of the first is less than the id of the next. This is to prevent double relationships and
self relationships. Using said match, relationships between all these nodes are created. Lastly,
the center node and all relationships connected to it are removed.</p><p><strong>Query. </strong>
</p><pre class="programlisting brush: cypher">CREATE (center)
FOREACH (x IN range(1,6)| CREATE (leaf { count : x }),(center)-[:X]-&gt;(leaf))
WITH center
MATCH (leaf1)&lt;--(center)--&gt;(leaf2)
WHERE id(leaf1)&lt;id(leaf2)
CREATE (leaf1)-[:X]-&gt;(leaf2)
WITH center
MATCH (center)-[r]-&gt;()
DELETE center,r;</pre><p>
</p><p>Nothing is returned by this query.</p><div class="queryresult table"><a id="idp7115120"></a><p class="title"><strong>Result</strong></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col class="col1" /></colgroup><tfoot><tr><th align="left" valign="top">Nodes created: 7
</th></tr><tr><th align="left" valign="top">Relationships created: 21
</th></tr><tr><th align="left" valign="top">Properties set: 6
</th></tr><tr><th align="left" valign="top">Nodes deleted: 1
</th></tr><tr><th align="left" valign="top">Relationships deleted: 6</th></tr></tfoot><tbody><tr><td class="emptyresult" align="left" valign="top"><p><code class="literal">(empty result)</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /><div class="figure"><a id="idp7128784"></a><p class="title"><strong>Figure 5.13. Graph</strong></p><div class="figure-contents"><a class="ulink" href="images/cypher-prettygraphscompletegraph-graph.svg" target="_top">
<span class="inlinemediaobject"><img src="images/cypher-prettygraphscompletegraph-graph.svg" alt="cypher-prettygraphscompletegraph-graph.svg" /></span>
</a></div></div><br class="figure-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="cookbook-friendship-graph"></a>5.14.4. Friendship graph</h3></div></div></div><p>This query first creates a center node, and then once per element in the range, creates a cycle graph and connects it to the center</p><p><strong>Query. </strong>
</p><pre class="programlisting brush: cypher">CREATE (center)
FOREACH (x IN range(1,3)| CREATE (leaf1),(leaf2),(center)-[:X]-&gt;(leaf1),(center)-[:X]-&gt;(leaf2),
  (leaf1)-[:X]-&gt;(leaf2))
RETURN ID(center) AS id</pre><p>
</p><p>The id of the center node is returned by the query.</p><div class="queryresult table"><a id="idp7136240"></a><p class="title"><strong>Result</strong></p><div class="queryresult table-contents"><table summary="Result" cellspacing="0" cellpadding="0" border="1"><colgroup><col class="col1" /></colgroup><thead><tr><th align="left" valign="top">id</th></tr></thead><tfoot><tr><th align="left" valign="top">1 row
</th></tr><tr><th align="left" valign="top">Nodes created: 7
</th></tr><tr><th align="left" valign="top">Relationships created: 9</th></tr></tfoot><tbody><tr><td align="left" valign="top"><p><code class="literal">7</code></p></td></tr></tbody></table></div></div><br class="queryresult table-break" /><div class="figure"><a id="idp7147392"></a><p class="title"><strong>Figure 5.14. Graph</strong></p><div class="figure-contents"><a class="ulink" href="images/cypher-prettygraphsfriendshipgraph-graph.svg" target="_top">
<span class="inlinemediaobject"><img src="images/cypher-prettygraphsfriendshipgraph-graph.svg" alt="cypher-prettygraphsfriendshipgraph-graph.svg" /></span>
</a></div></div><br class="figure-break" /></div></div><HR xmlns=""></HR><a xmlns="" href="ln-idp218960.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2013 Neo Technology</p></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="cypher-cookbook-clustering-coefficient.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="data-modeling-examples.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="cypher-cookbook-path-tree.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
