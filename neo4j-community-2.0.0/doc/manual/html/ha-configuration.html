<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>23.2. Setup and configuration</title><link rel="stylesheet" type="text/css" href="docbook-xsl.css" /><meta name="generator" content="DocBook XSL Stylesheets V1.76.1" /><link rel="home" href="index.html" title="The Neo4j Manual v2.0.0" /><link rel="up" href="ha.html" title="Chapter 23. High Availability" /><link rel="prev" href="ha-architecture.html" title="23.1. Architecture" /><link rel="next" href="ha-how.html" title="23.3. How Neo4j HA operates" /><link rel="preface" href="preface.html" title="Preface" /><link rel="part" href="introduction.html" title="Part I. Introduction" /><link rel="chapter" href="introduction-highlights.html" title="Chapter 1. Neo4j Highlights" /><link rel="chapter" href="graphdb-concepts.html" title="Chapter 2. Graph Database Concepts" /><link rel="chapter" href="graphdb-neo4j.html" title="Chapter 3. The Neo4j Graph Database" /><link rel="part" href="tutorials.html" title="Part II. Tutorials" /><link rel="chapter" href="tutorials-cypher.html" title="Chapter 4. Getting started with Cypher" /><link rel="chapter" href="data-modeling-examples.html" title="Chapter 5. Data Modeling Examples" /><link rel="chapter" href="languages.html" title="Chapter 6. Languages" /><link rel="part" href="cypher-query-lang.html" title="Part III. Cypher Query Language" /><link rel="chapter" href="cypher-intro.html" title="Chapter 7. Introduction" /><link rel="chapter" href="query-syntax.html" title="Chapter 8. Syntax" /><link rel="chapter" href="query-general.html" title="Chapter 9. General Clauses" /><link rel="chapter" href="query-read.html" title="Chapter 10. Reading Clauses" /><link rel="chapter" href="query-write.html" title="Chapter 11. Writing Clauses" /><link rel="chapter" href="query-function.html" title="Chapter 12. Functions" /><link rel="chapter" href="cypher-schema.html" title="Chapter 13. Schema" /><link rel="chapter" href="examples-from-sql-to-cypher.html" title="Chapter 14. From SQL to Cypher" /><link rel="part" href="reference-documentation.html" title="Part IV. Reference" /><link rel="chapter" href="capabilities.html" title="Chapter 15. Capabilities" /><link rel="chapter" href="transactions.html" title="Chapter 16. Transaction Management" /><link rel="chapter" href="import.html" title="Chapter 17. Data Import" /><link rel="chapter" href="graph-algo.html" title="Chapter 18. Graph Algorithms" /><link rel="chapter" href="rest-api.html" title="Chapter 19. REST API" /><link rel="chapter" href="deprecations.html" title="Chapter 20. Deprecations" /><link rel="part" href="operations.html" title="Part V. Operations" /><link rel="chapter" href="deployment.html" title="Chapter 21. Installation &amp; Deployment" /><link rel="chapter" href="embedded-configuration.html" title="Chapter 22. Configuration &amp; Performance" /><link rel="chapter" href="ha.html" title="Chapter 23. High Availability" /><link rel="chapter" href="operations-backup.html" title="Chapter 24. Backup" /><link rel="chapter" href="operations-security.html" title="Chapter 25. Security" /><link rel="chapter" href="operations-monitoring.html" title="Chapter 26. Monitoring" /><link rel="part" href="tools.html" title="Part VI. Tools" /><link rel="chapter" href="tools-webadmin.html" title="Chapter 27. Web Interface" /><link rel="chapter" href="shell.html" title="Chapter 28. Neo4j Shell" /><link rel="part" href="community.html" title="Part VII. Community" /><link rel="chapter" href="community-support.html" title="Chapter 29. Community Support" /><link rel="chapter" href="community-contributing.html" title="Chapter 30. Contributing to Neo4j" /><link rel="part" href="advanced-usage.html" title="Part VIII. Advanced Usage" /><link rel="chapter" href="server-extending.html" title="Chapter 31. Extending the Neo4j Server" /><link rel="chapter" href="tutorials-java-embedded.html" title="Chapter 32. Using Neo4j embedded in Java applications" /><link rel="chapter" href="tutorial-traversal.html" title="Chapter 33. The Traversal Framework" /><link rel="chapter" href="indexing.html" title="Chapter 34. Legacy Indexing" /><link rel="chapter" href="batchinsert.html" title="Chapter 35. Batch Insertion" /><link rel="appendix" href="manpages.html" title="Appendix A. Manpages" /><link rel="refentry" href="re01.html" title="neo4j" /><link rel="refentry" href="re02.html" title="neo4j-installer" /><link rel="refentry" href="re03.html" title="neo4j-shell" /><link rel="refentry" href="re04.html" title="neo4j-backup" /><link rel="refentry" href="re05.html" title="neo4j-arbiter" /><link rel="subsection" href="ha-configuration.html#_specifying_cluster_members" title="23.2.1. Specifying cluster members" /><link rel="subsection" href="ha-configuration.html#_server_configuration" title="23.2.2. Server configuration" /><link rel="subsection" href="ha-configuration.html#_database_configuration" title="23.2.3. Database configuration" /><link rel="copyright" href="ln-idp218960.html" title="License: Creative Commons 3.0" />


<!-- favicon -->

<link rel="shortcut icon" href="http://neo4j.org/favicon.ico" type="image/vnd.microsoft.icon" />
<link rel="icon" href="http://neo4j.org/favicon.ico" type="image/x-icon" />

<!-- style -->

<link href="css/shCore.css" rel="stylesheet" type="text/css" />
<link href="css/shCoreEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/shThemeEclipse.css" rel="stylesheet" type="text/css" />
<link href="css/neo.css" rel="stylesheet" type="text/css" />

<!-- Syntax Highlighter -->

<script type="text/javascript" src="js/shCore.js"></script>
<script type="text/javascript" src="js/shBrushJava.js"></script>
<script type="text/javascript" src="js/shBrushJScript.js"></script>
<script type="text/javascript" src="js/shBrushBash.js"></script>
<script type="text/javascript" src="js/shBrushPlain.js"></script>
<script type="text/javascript" src="js/shBrushXml.js"></script>
<script type="text/javascript" src="js/shBrushGroovy.js"></script>
<script type="text/javascript" src="js/shBrushCypher.js"></script>
<script type="text/javascript" src="js/shBrushScala.js"></script>
<script type="text/javascript" src="js/shBrushSql.js"></script>
<script type="text/javascript" src="js/shBrushPython.js"></script>
<script type="text/javascript" src="js/shBrushProperties.js"></script>

<!-- activate when needed
<script type="text/javascript" src="js/shBrushRuby.js"></script>
<script type="text/javascript" src="js/shBrushCSharp.js"></script>
-->
 
<script type="text/javascript">
  SyntaxHighlighter.defaults['tab-size'] = 4;
  SyntaxHighlighter.defaults['gutter'] = false;
  SyntaxHighlighter.defaults['toolbar'] = false;
  SyntaxHighlighter.all()
</script>

<!-- JQuery -->

<script type="text/javascript" src="js/jquery-1.6.4.min.js"></script>

<!-- Replace SVG for browsers that lack support. -->
<script type="text/javascript" src="js/svgreplacer.js"></script>

<!-- Image Scaler -->

<script type="text/javascript" src="js/imagescaler.js"></script>

<!-- Table Styler -->

<script type="text/javascript" src="js/tablestyler.js"></script>

<!-- Version -->

<script type="text/javascript" src="js/version.js"></script>

<!-- Offline Sidebar -->

<script type="text/javascript" src="js/sidebar.js"></script>


<div xmlns="" class="breadcrumbs"><span class="breadcrumb-link"><a href="index.html">The Neo4j Manual</a></span> &gt; <span class="breadcrumb-link"><a href="operations.html">Operations</a></span> &gt; <span class="breadcrumb-link"><a href="ha.html">High Availability</a></span> &gt; <span class="breadcrumb-node">Setup and configuration</span></div></head><body><div class="navheader"><table width="100%" summary="Navigation header"><tr><td width="20%" align="left"><a accesskey="p" href="ha-architecture.html">Prev</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ha-how.html">Next</a></td></tr></table><hr /></div><div class="section"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="ha-configuration"></a>23.2. Setup and configuration</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="ha-configuration.html#_specifying_cluster_members">23.2.1. Specifying cluster members</a></span></dt><dt><span class="section"><a href="ha-configuration.html#_server_configuration">23.2.2. Server configuration</a></span></dt><dt><span class="section"><a href="ha-configuration.html#_database_configuration">23.2.3. Database configuration</a></span></dt></dl></div><p>Neo4j HA can be set up to accommodate differing requirements for load, fault tolerance and available hardware.</p><p>In HA mode, Neo4j instances form a cluster.
The instances monitor each others' availability to take account of instances joining and leaving the cluster.
They elect one instance to be the master, and designate the other instances to be slaves.</p><p>For installation instructions of a High Availability cluster see <a class="xref" href="ha-setup-tutorial.html" title="23.6. High Availability setup tutorial">Section 23.6, “High Availability setup tutorial”</a>.</p><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_specifying_cluster_members"></a>23.2.1. Specifying cluster members</h3></div></div></div><p>Specify the instances that should form the cluster by supplying <code class="literal">ha.initial_hosts</code>, a comma-separated list of URLs.
When each instance starts, if it can contact any of the initial hosts, then it will form a cluster with them,
otherwise it will start its own cluster.</p><p>Note that the parameter is called <code class="literal">ha.initial_hosts</code> because it’s only used when instances initially join the cluster.
This means that you can extend the cluster without changing the configuration of existing instances.</p></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_server_configuration"></a>23.2.2. Server configuration</h3></div></div></div><p>If you are running Neo4j server, specify <code class="literal">org.neo4j.server.database.mode=HA</code> in <span class="emphasis"><em>neo4j-server.properties</em></span>.</p><div class="table"><a id="idp16550288"></a><p class="title"><strong>HA server configuration parameters</strong></p><div class="table-contents"><table summary="HA server configuration parameters" cellspacing="0" cellpadding="0" border="0"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top"> Parameter Name                 </th><th align="left" valign="top"> Description                                      </th><th align="left" valign="top"> Example value </th><th align="left" valign="top"> Required?</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">org.neo4j.server.database.mode</code></p></td><td align="left" valign="top"><p>Whether to run as a single server or in HA mode.</p></td><td align="left" valign="top"><p><code class="literal">single or HA</code></p></td><td align="left" valign="top"><p>yes</p></td></tr></tbody></table></div></div><br class="table-break" /></div><div class="section"><div class="titlepage"><div><div><h3 class="title"><a id="_database_configuration"></a>23.2.3. Database configuration</h3></div></div></div><p>HA configuration parameters should be supplied alongside general Neo4j parameters in <span class="emphasis"><em>neo4j.properties</em></span>.
There are many configurable parameters, most in most cases it isn’t necessary to modify the default values.
The only parameters that need to be specified are <code class="literal">ha.server_id</code> and <code class="literal">ha.initial_hosts</code>.</p><div class="table"><a id="idp16570048"></a><p class="title"><strong>HA database configuration parameters</strong></p><div class="table-contents"><table summary="HA database configuration parameters" cellspacing="0" cellpadding="0" border="0"><colgroup><col class="col_1" /><col class="col_2" /><col class="col_3" /><col class="col_4" /></colgroup><thead><tr><th align="left" valign="top"> Parameter Name        </th><th align="left" valign="top"> Description                                     </th><th align="left" valign="top"> Example value  </th><th align="left" valign="top"> Required?</th></tr></thead><tbody><tr><td align="left" valign="top"><p><code class="literal">ha.server_id</code></p></td><td align="left" valign="top"><p>Id for a cluster instance. Must be unique within the cluster.</p></td><td align="left" valign="top"><p><code class="literal">1</code></p></td><td align="left" valign="top"><p>yes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.initial_hosts</code></p></td><td align="left" valign="top"><p>A comma-separated list of other members of the cluster to join.</p></td><td align="left" valign="top"><p><code class="literal">server1:5001,server2:5001</code></p></td><td align="left" valign="top"><p>yes</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.cluster_server</code></p></td><td align="left" valign="top"><p>Host &amp; port to bind the cluster management communication.</p></td><td align="left" valign="top"><p><code class="literal">server1:5001</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.allow_init_cluster</code></p></td><td align="left" valign="top"><p>Whether to allow this instance to create a cluster if unable to join.</p></td><td align="left" valign="top"><p><code class="literal">true</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.default_timeout</code></p></td><td align="left" valign="top"><p>Default timeout used for clustering timeouts. Override specific timeout settings with proper values if necessary. This value is the default value for settings ha.heartbeat_interval, ha.paxos_timeout and ha.learn_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.heartbeat_interval</code></p></td><td align="left" valign="top"><p>How often heartbeat messages should be sent. Defaults to ha.default_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.heartbeat_timeout</code></p></td><td align="left" valign="top"><p>Timeout for heartbeats between cluster members. Should be at least twice that of ha.heartbeat_interval.</p></td><td align="left" valign="top"><p><code class="literal">11s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.broadcast_timeout</code></p></td><td align="left" valign="top"><p>Timeout for broadcasting values in cluster. Must consider end-to-end duration of Paxos algorithm. This value is the default value for settings ha.join_timeout and ha.leave_timeout.</p></td><td align="left" valign="top"><p><code class="literal">30s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.join_timeout</code></p></td><td align="left" valign="top"><p>Timeout for joining a cluster. Defaults to ha.broadcast_timeout.</p></td><td align="left" valign="top"><p><code class="literal">30s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.configuration_timeout</code></p></td><td align="left" valign="top"><p>Timeout for waiting for configuration from an existing cluster member during cluster join.</p></td><td align="left" valign="top"><p><code class="literal">1s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.leave_timeout</code></p></td><td align="left" valign="top"><p>Timeout for waiting for cluster leave to finish. Defaults to ha.broadcast_timeout.</p></td><td align="left" valign="top"><p><code class="literal">30s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.paxos_timeout</code></p></td><td align="left" valign="top"><p>Default timeout for all Paxos timeouts. Defaults to ha.default_timeout. This value is the default value for settings ha.phase1_timeout, ha.phase2_timeout and ha.election_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.phase1_timeout</code></p></td><td align="left" valign="top"><p>Timeout for Paxos phase 1. Defaults to ha.paxos_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.phase2_timeout</code></p></td><td align="left" valign="top"><p>Timeout for Paxos phase 2. Defaults to ha.paxos_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.learn_timeout</code></p></td><td align="left" valign="top"><p>Timeout for learning values. Defaults to ha.default_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.election_timeout</code></p></td><td align="left" valign="top"><p>Timeout for waiting for other members to finish a role election. Defaults to ha.paxos_timeout.</p></td><td align="left" valign="top"><p><code class="literal">5s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.read_timeout</code></p></td><td align="left" valign="top"><p>How long a slave will wait for response from master before giving up.</p></td><td align="left" valign="top"><p><code class="literal">20s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.state_switch_timeout</code></p></td><td align="left" valign="top"><p>Timeout for waiting for instance to become master or slave.</p></td><td align="left" valign="top"><p><code class="literal">20s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.lock_read_timeout</code></p></td><td align="left" valign="top"><p>Timeout for taking remote (write) locks on slaves. Defaults to ha.read_timeout.</p></td><td align="left" valign="top"><p><code class="literal">20s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.max_concurrent_channels_per_slave</code></p></td><td align="left" valign="top"><p>Maximum number of connections a slave can have to the master.</p></td><td align="left" valign="top"><p><code class="literal">20</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.server</code></p></td><td align="left" valign="top"><p>Hostname and port to bind the HA server.</p></td><td align="left" valign="top"><p><code class="literal">my-domain.com:6001</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.slave_only</code></p></td><td align="left" valign="top"><p>Whether this instance should only participate as slave in cluster. If set to true, it will never be elected as master.</p></td><td align="left" valign="top"><p><code class="literal">false</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.branched_data_policy</code></p></td><td align="left" valign="top"><p>Policy for how to handle branched data.</p></td><td align="left" valign="top"><p><code class="literal">keep_last or keep_all or keep_none</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.com_chunk_size</code></p></td><td align="left" valign="top"><p>Max size of the data chunks that flows between master and slaves in HA. Bigger size may increase throughput, but may be more sensitive to variations in bandwidth, whereas lower size increases tolerance for bandwidth variations.</p></td><td align="left" valign="top"><p><code class="literal">2M</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.pull_interval</code></p></td><td align="left" valign="top"><p>Interval of pulling updates from master.</p></td><td align="left" valign="top"><p><code class="literal">10s</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.tx_push_factor</code></p></td><td align="left" valign="top"><p>The amount of slaves the master will ask to replicate a committed transaction.</p></td><td align="left" valign="top"><p><code class="literal">1</code></p></td><td align="left" valign="top"><p>no</p></td></tr><tr><td align="left" valign="top"><p><code class="literal">ha.tx_push_strategy</code></p></td><td align="left" valign="top"><p>Push strategy of a transaction to a slave during commit.</p></td><td align="left" valign="top"><p><code class="literal">fixed or round_robin</code></p></td><td align="left" valign="top"><p>no</p></td></tr></tbody></table></div></div><br class="table-break" /></div></div><HR xmlns=""></HR><a xmlns="" href="ln-idp218960.html"><p xmlns="http://www.w3.org/1999/xhtml" class="copyright">Copyright © 2013 Neo Technology</p></a><div class="navfooter"><hr /><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ha-architecture.html">Prev</a> </td><td width="20%" align="center"><a accesskey="u" href="ha.html">Up</a></td><td width="40%" align="right"> <a accesskey="n" href="ha-how.html">Next</a></td></tr><tr><td width="40%" align="left" valign="top"> </td><td width="20%" align="center"><a accesskey="h" href="index.html">Home</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div></body></html>
